angular.module("myApp",["ngRoute"]).config(["$routeProvider","$httpProvider",function(o,e){o.when("/",{templateUrl:"app/view/home.html",controller:"HomeController",controllerAs:"vm"}).when("/login",{templateUrl:"app/view/login.html",controller:"LoginController",controllerAs:"vm"}).otherwise({redirectTo:"/"}),e.interceptors.push("authInterceptor")}]),(()=>{function o(){}angular.module("myApp").controller("HomeController",o),o.$inject=[]})(),(()=>{function o(o,e){var t=this;t.user={userName:"",password:""},t.login=function(){t.loginForm&&t.loginForm.$invalid?angular.forEach(t.loginForm,function(o,e){"$"!==e[0]&&o.$setTouched&&o.$setTouched()}):e.login(t.user).then(function(){o.path("/")}).catch(function(o){console.error(o)})}}angular.module("myApp").controller("LoginController",o),o.$inject=["$location","authService"]})(),angular.module("myApp").service("authService",["$http","$window",function(e,t){this.login=function(o){return e.post("http://localhost:5007/api/Login/LoginUser",o).then(function(o){return o.data&&t.localStorage.setItem("accessToken",o.data.accessToken),o.data}).catch(function(o){throw console.error("Login failed:",o),o})},this.saveToken=function(o){t.localStorage.setItem("accessToken",o)},this.getToken=function(){return t.localStorage.getItem("accessToken")},this.isAuthenticated=function(){return!!this.getToken()},this.logout=function(){t.localStorage.removeItem("accessToken")}}]),(()=>{function o(e,t,n){return{request:function(o){var e;return o.url.endsWith(".html")||(e=t.localStorage.getItem("token"))&&(o.headers.Authorization="Bearer "+e),o},responseError:function(o){return 401===o.status&&n.path("/login"),e.reject(o)}}}angular.module("myApp").factory("authInterceptor",o),o.$inject=["$q","$window","$location"]})();