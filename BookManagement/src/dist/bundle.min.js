function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function ownKeys(t,o){var e,r=Object.keys(t);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(t),o&&(e=e.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,e)),r}function _objectSpread(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(e),!0).forEach(function(o){_defineProperty(t,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))})}return t}function _defineProperty(o,t,e){return(t=_toPropertyKey(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function _toPropertyKey(o){o=_toPrimitive(o,"string");return"symbol"==_typeof(o)?o:o+""}function _toPrimitive(o,t){if("object"!=_typeof(o)||!o)return o;var e=o[Symbol.toPrimitive];if(void 0===e)return("string"===t?String:Number)(o);e=e.call(o,t||"default");if("object"!=_typeof(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}angular.module("myApp",["ngRoute"]),(()=>{function o(t,n,c,i){var a=!1,l=[];return{request:function(o){var t;return o.url.endsWith(".html")||(t=n.localStorage.getItem("accessToken"))&&(o.headers.Authorization="Bearer ".concat(t)),o},responseError:function(e){var r,o;return 401!==e.status||a?401===e.status&&a?(o=t.defer(),l.push(o),o.promise.then(function(){var o=i.get("$http"),t=n.localStorage.getItem("accessToken");return e.config.headers.Authorization="Bearer ".concat(t),o(e.config)})):t.reject(e):(a=!0,r=i.get("$http"),(o=n.localStorage.getItem("refreshToken"))?r.post("http://localhost:5007/api/Login/RefreshToken",{refreshToken:o}).then(function(o){var o=o.data.accessToken,t=(n.localStorage.setItem("accessToken",o),a=!1,l.forEach(function(o){return o.resolve()}),l=[],e.config);return t.headers.Authorization="Bearer ".concat(o),r(t)}).catch(function(o){return a=!1,u(i,c),t.reject(o)}):(u(i,c),t.reject(e)))}};function u(o,t){o.get("authService").logout(),t.path("/login")}}angular.module("myApp").factory("authInterceptor",o),o.$inject=["$q","$window","$location","$injector"]})(),(()=>{function o(t,e,r){t.books=[],e.getBooks().then(function(o){t.books=o}),t.deleteBook=function(o){confirm("Do you Want to delete?")&&e.deleteBook(o).then(function(o){t.books=o})},t.editBook=function(o){r.path("addbook/"+o)}}angular.module("myApp").controller("AdminBookController",o),o.$inject=["$scope","bookService","$location"]})(),(()=>{function o(o,t,e,r){var n=this;n.book={title:"",author:"",price:"",stock:"",categoryId:""},n.isEditMode=!1,n.error="",n.category=[],o.get("http://localhost:5007/api/Categorys/GetAllCategory").then(function(o){n.category=o.data}),r.id&&(n.isEditMode=!0,o=t.getBookById(Number(r.id)),n.book.title=o.title,n.book.author=o.author,n.book.price=o.price,n.book.stock=o.stock,n.book.categoryId=o.categoryId),n.AddBook=function(){n.addBookForm&&n.addBookForm.$invalid?angular.forEach(n.addBookForm,function(o,t){"$"!==t[0]&&o.$setTouched&&o.$setTouched()}):n.isEditMode?t.updateBook(_objectSpread(_objectSpread({},n.book),{},{Id:Number(r.id)})).then(function(){e.path("/")}).catch(function(o){return console.log(o)}):t.addBook(n.book).then(function(){e.path("/")}).catch(function(o){return console.log(o)})}}angular.module("myApp").controller("BookAddController",o),o.$inject=["$http","bookService","$location","$routeParams"]})(),(()=>{function o(){}angular.module("myApp").controller("HomeController",o),o.$inject=[]})(),(()=>{function o(t,o){var e=this;e.user={userName:"",password:""},e.error="",e.login=function(){e.loginForm&&e.loginForm.$invalid?angular.forEach(e.loginForm,function(o,t){"$"!==t[0]&&o.$setTouched&&o.$setTouched()}):o.login(e.user).then(function(o){t.path("/"),e.error=""}).catch(function(o){console.error(o),e.error=o})}}angular.module("myApp").controller("LoginController",o),o.$inject=["$location","authService"]})(),(()=>{function o(t,o){t.books=[],o.getBooks().then(function(o){t.books=o})}angular.module("myApp").controller("UserBookController",o),o.$inject=["$scope","bookService"]})(),angular.module("myApp").config(["$routeProvider","$httpProvider",function(o,t){o.when("/",{templateUrl:"app/view/home.html",controller:"HomeController",controllerAs:"vm"}).when("/login",{templateUrl:"app/view/login.html",controller:"LoginController",controllerAs:"vm"}).when("/adminbook",{templateUrl:"app/view/adminBookPage.html",controller:"AdminBookController",controllerAs:"vm",resolve:{auth:["$q","$location","authService","tokenService",function(o,t,e,r){return e.isAuthenticated()?"SPAdmin"===(r=(e=r.decode())?e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]:null)||"Admin"===r||(t.path("/unauthorized"),o.reject("Not authorized")):(t.path("/login"),o.reject("Not authenticated"))}]}}).when("/addbook",{templateUrl:"app/view/bookAdd.html",controller:"BookAddController",controllerAs:"vm",resolve:{auth:["$q","$location","authService","tokenService",function(o,t,e,r){return e.isAuthenticated()?"SPAdmin"===(r=(e=r.decode())?e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]:null)||"Admin"===r||(t.path("/unauthorized"),o.reject("Not authorized")):(t.path("/login"),o.reject("Not authenticated"))}]}}).when("/addbook/:id",{templateUrl:"app/view/bookAdd.html",controller:"BookAddController",controllerAs:"vm",resolve:{auth:["$q","$location","authService","tokenService",function(o,t,e,r){return e.isAuthenticated()?"SPAdmin"===(r=(e=r.decode())?e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]:null)||"Admin"===r||(t.path("/unauthorized"),o.reject("Not authorized")):(t.path("/login"),o.reject("Not authenticated"))}]}}).when("/userbook",{templateUrl:"app/view/userBookPage.html",controller:"UserBookController",controllerAs:"vm",resolve:{auth:["$q","$location","authService","tokenService",function(o,t,e,r){return e.isAuthenticated()?"User"===((e=r.decode())?e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]:null)||(t.path("/unauthorized"),o.reject("Not authorized")):(t.path("/login"),o.reject("Not authenticated"))}]}}).when("/unauthorized",{templateUrl:"app/view/unauthorized.html"}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptor")}]),angular.module("myApp").service("authService",["$http","$window","$rootScope",function(t,e,r){this.login=function(o){return t.post("".concat("http://localhost:5007/api/","Login/LoginUser"),o).then(function(o){return o.data&&(e.localStorage.setItem("accessToken",o.data.accessToken),e.localStorage.setItem("refreshToken",o.data.refreshToken),r.$emit("loginSuccess")),o.data}).catch(function(o){throw o.data.message})},this.getToken=function(){return e.localStorage.getItem("accessToken")},this.isAuthenticated=function(){return!!this.getToken()},this.logout=function(){e.localStorage.removeItem("accessToken"),e.localStorage.removeItem("refreshToken"),r.$emit("logoutSuccess")}}]),(()=>{function o(r){var n={books:[]},c=(this.state=n,"http://localhost:5007/api/");this.getBookById=function(t){return n.books.find(function(o){return o.bookId===t})},this.getBooks=function(){return r.get("".concat(c,"Books/GellAllBooks")).then(function(o){return n.books=o.data,n.books}).catch(function(o){throw console.error("Error fetching books:",o),o})},this.updateBook=function(e){return r.put("".concat(c,"Books/UpdateBook"),e).then(function(){var t,o;t=e,-1!==(o=n.books.findIndex(function(o){return o.bookId===t.Id}))&&(n.books[o]=t)}).catch(function(o){throw console.error("Error deleting book:",o),o})},this.deleteBook=function(t){return r.delete("".concat(c,"Books/DeleteBook/").concat(t)).then(function(){return n.books=n.books.filter(function(o){return o.bookId!==t}),n.books}).catch(function(o){throw console.error("Error deleting book:",o),o})},this.addBook=function(o){return r.post("".concat(c,"Books/AddBook"),o).then(function(){return n.books.push(o),n.books}).catch(function(o){throw console.error("Error at Adding",o),o})}}angular.module("myApp").service("bookService",o),o.$inject=["$http"]})(),(()=>{function o(t){return{decode:function(){var o=t.localStorage.getItem("accessToken");if(!o)return null;try{return jwt_decode(o)}catch(o){return console.error("Invalid token:",o),null}}}}angular.module("myApp").factory("tokenService",o),o.$inject=["$window"]})(),(()=>{function o(o){this.title="Book Management System",this.subtitle="Easily manage your books, add new titles, track availability, and keep everything organized.",this.ctaText="Get Started",this.goToAddBook=function(){o.path("/addbook")}}angular.module("myApp").component("heroSection",{templateUrl:"app/component/heroSection/hero.html",controller:o,controllerAs:"hero"}),o.$inject=["$location"]})(),(()=>{function o(){}angular.module("myApp").component("appFooter",{templateUrl:"app/layouts/footer/footer.html",controller:o}),o.$inject=[]})(),(()=>{function o(o,t,e,r){var n=this;function c(){var o=e.decode();n.role=o?o["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]:null}n.isLoggedIn=function(){return o.isAuthenticated()},r.$on("loginSuccess",function(){c()}),r.$on("logoutSuccess",function(){n.role=null}),n.hasAdminAccess=function(){return n.isLoggedIn()&&("SPAdmin"===n.role||"Admin"===n.role)},n.hasUserAccess=function(){return n.isLoggedIn()&&"User"===n.role},n.logout=function(){o.logout(),t.path("/login")},c()}angular.module("myApp").controller("NavbarController",o),o.$inject=["authService","$location","tokenService","$rootScope"]})();